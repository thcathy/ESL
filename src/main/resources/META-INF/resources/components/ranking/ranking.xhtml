<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:composite="http://java.sun.com/jsf/composite" xmlns:p="http://java.sun.com/jsf/html">

<composite:interface>
	<composite:attribute name="ranking" />
	<composite:attribute name="title" />
	<composite:attribute name="date" />
</composite:interface>

<composite:implementation>
	<div class="w3-card-4">
		<div class="w3-container w3-theme">
			<h5><i class="fa fa-trophy" aria-hidden="true"></i> #{cc.attrs.title}
				<h:outputText value="#{cc.attrs.date}" rendered="#{cc.attrs.date != null}">
					<f:convertDateTime pattern="MMM yyyy" timeZone="Asia/Hong_Kong" />
				</h:outputText>
			</h5>
		</div>

		<div>
			<ul class="w3-ul w3-white">
				<ui:repeat var="i" varStatus="r" value="#{cc.attrs.ranking.scores}" rendered="#{cc.attrs.ranking != null}">
					<li class="w3-padding-right">
						<span class="w3-badge w3-green">#{cc.attrs.ranking.firstPosition + r.index}</span>&#160;
						<h:panelGroup rendered="#{cc.attrs.ranking.firstPosition + r.index == 1}"><i class="fa fa-trophy" aria-hidden="true" style="color: #ffcc3c"></i>&#160;</h:panelGroup>
						<h:panelGroup rendered="#{cc.attrs.ranking.firstPosition + r.index == 2}"><i class="fa fa-trophy" aria-hidden="true" style="color: #cdd0d7"></i>&#160;</h:panelGroup>
						<h:panelGroup rendered="#{cc.attrs.ranking.firstPosition + r.index == 3}"><i class="fa fa-trophy" aria-hidden="true" style="color: #CD7F32"></i>&#160;</h:panelGroup>
						<h:outputText value="#{i.member.displayName.length() gt 20 ? i.member.displayName.substring(0,17).concat('...') : i.member.displayName}" />
						<span class="w3-right"><i class="fa fa-star" aria-hidden="true" style="color: gold;"></i> #{i.score}</span>
					</li>
				</ui:repeat>
			</ul>
		</div>

		<div class="w3-container w3-theme w3-right-align"> </div>
	</div>
</composite:implementation>
</html>