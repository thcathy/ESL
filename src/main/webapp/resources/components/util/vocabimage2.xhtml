<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"	
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface>
	<composite:attribute name="picPaths" required="true"/>
 	<composite:attribute name="showImage" type="java.lang.Boolean" default="true" /> 	
</composite:interface>

<composite:implementation>
	<script id="searchCallback" type="text/javascript" src=""></script>
	<script type="text/javascript">
	//<![CDATA[    
    var picPaths = '#{cc.attrs.picPaths}'.split(',');
    var imageCount = 0;
    
    function showImage() {
		if (picPaths.length < 1) {
			jQuery('#gImageContent').html('#{generalMsg.imageNA}');
		} else {
			jQuery('#vocabImage').attr("src", picPaths[imageCount]);
			
			if (picPaths.length == 1) {jQuery('#nextImage').hide();}
			else {jQuery('#nextImage').show();}
		}
	}

	function resetImage(newPicPaths) {
		picPaths = newPicPaths;
		imageCount = 0;
		if (#{cc.attrs.showImage} && #{userSession.showGoogleImage}) {
			showImage();
		}
	}

	function changeImg() {
		imageCount = imageCount + 1;
		if (imageCount >= picPaths.length) imageCount = 0;

		jQuery('#vocabImage').attr("src", picPaths[imageCount]);
	}
	//]]>
    </script>
    
<a4j:outputPanel id="googleImagePanel">
	<div id="gImageContent" class="w3-accordion-content w3-show w3-center">
		<div class="w3-display-container w3-padding-top">
			<img id="vocabImage" src="" alt="No Image" style="max-width: 300px; max-height:300px; width: auto;" />
			<div id="nextImage" class="w3-display-bottomright w3-container">
				<span class="w3-hover-green" onclick="changeImg()"><i class="fa fa-chevron-right" aria-hidden="true"></i></span>
			</div>
		</div>
	</div>
	<script language="Javascript" type="text/javascript">
	//<![CDATA[
		showImage();
	//]]>
	</script>
</a4j:outputPanel>

</composite:implementation>
</html>