<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:t="http://myfaces.apache.org/tomahawk"
				xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
				xmlns:a4j="http://richfaces.org/a4j"
				xmlns:rich="http://richfaces.org/rich"
				xmlns:esl="http://www.funfunspell.com/jsf"
				xmlns:util="http://java.sun.com/jsf/composite/components/util"
				template="/template/short.xhtml">

	<ui:define name="subTitle">#{htmlHeadMsg.practice_selfdictation_result_title}</ui:define>
	<ui:define name="head">
		<meta name="keywords" content="#{htmlHeadMsg.practice_selfdictation_result_desc}" />
		<script type="text/javascript">
			//<![CDATA[       
			jQuery.noConflict();			
			//]]>
		</script>
	</ui:define>

	<ui:define name="mainDiv">
		<div class="w3-container w3-green">
			<h3>
				<i class="fa fa-pencil-square" aria-hidden="true"></i> #{generalMsg.dictation}
			</h3>
		</div>

		<h:form>
			<div class="w3-margin w3-xlarge w3-padding-bottom w3-text-teal">
				<esl:dictationNav2 />

				<div class="w3-row w3-center w3-margin w3-medium">
					<h:commandLink styleClass="w3-btn w3-green" onclick="showSpinner()" action="#{dictationPracticeController.authDictation}">
						<i class="fa fa-repeat" aria-hidden="true"></i> #{selfDictationMsg.resultRetry}</h:commandLink>
					<a4j:commandLink id="recommendDictation" render="dictationButtons dictationSummary"
									 oncomplete="highlightDictationSummaryRecommendation()"
									 action="#{dictationPracticeController.recommendDictation}"
									 rendered="#{!dictationPracticeController.recommended}"
									 styleClass="w3-btn w3-theme-l1">
						<i class="fa fa-thumbs-o-up" aria-hidden="true"></i> #{selfDictationMsg.resultRecommend}</a4j:commandLink>

					<span id="spinner" class="w3-hide"><i class="fa fa-spinner w3-spin" style="font-size:28px"></i></span>
				</div>

				<h3>
					<h:outputFormat value="#{selfDictationMsg.resultTitle}">
						<f:param value="#{dictationPracticeController.practice.mark}" />
						<f:param value="#{dictationPracticeController.practice.totalQuestions}" />
					</h:outputFormat>
				</h3>

				<esl:scoreBar2 startMark="#{dictationPracticeController.practice.mark}" maxMark="#{dictationPracticeController.practice.totalQuestions}" />
				<div class="w3-row-padding">
					<div class="w3-half">
						<a4j:outputPanel id="dictationSummary">
							<esl:oneDictationSummary2 dictation="#{dictationPracticeController.dictation}" />
						</a4j:outputPanel>
					</div>
					<div>
						<div class="w3-responsive">
							<table class="w3-table-all w3-medium w3-margin-top">
								<thead>
								<tr class="w3-theme">
									<td></td>
									<td><h:outputText value="#{selfDictationMsg.practicePhonetic}" /></td>
									<td><h:outputText value="#{selfDictationMsg.practiceWord}" /></td>
									<td><h:outputText value="#{selfDictationMsg.practiceAnswer}" /></td>
									<td></td>
								</tr>
								</thead>
								<tfoot>
									<tr>
										<td colspan="5">
											<h:outputText value="#{selfDictationMsg.practiceMark}" />: #{dictationPracticeController.practice.mark} / #{dictationPracticeController.practice.totalQuestions}
										</td>
									</tr>
								</tfoot>
								<t:dataList var="i" rowIndexVar="index" value="#{dictationPracticeController.practice.answers}" >
									<tr>
										<td>Q<h:outputText value="#{dictationPracticeController.practice.currentQuestion-index}" /></td>
										<td>[<h:outputText escape="false" value="#{dictationPracticeController.practice.questions[dictationPracticeController.practice.currentQuestion-1-index].IPA}" />]</td>
										<td><a href="#{phonPracticeMsg.practiceDictionaryLink}#{dictationPracticeController.practice.questions[dictationPracticeController.practice.currentQuestion-1-index].word}" target="_blank"><u><h:outputText
												value="#{dictationPracticeController.practice.questions[dictationPracticeController.practice.currentQuestion-1-index].word}" /></u></a></td>
										<td><h:outputText value="#{dictationPracticeController.practice.answers[dictationPracticeController.practice.currentQuestion-1-index]}" /></td>
										<td>
											<a4j:outputPanel rendered="#{dictationPracticeController.practice.corrects[dictationPracticeController.practice.currentQuestion-1-index]}"><i class="fa fa-check w3-text-light-green" aria-hidden="true"></i></a4j:outputPanel>
											<a4j:outputPanel rendered="#{!dictationPracticeController.practice.corrects[dictationPracticeController.practice.currentQuestion-1-index]}"><i class="fa fa-times w3-text-red" aria-hidden="true"></i></a4j:outputPanel>
										</td>
									</tr>
								</t:dataList>
							</table>
						</div>
						<div class="w3-container w3-light-grey w3-border w3-small">
							<h:panelGroup rendered="#{authenticationController.authenticated}"><p><i class="fa fa-plus-circle" aria-hidden="true"></i> <h:outputText value="#{phonPracticeMsg.practiceUseMemberWord}" /></p></h:panelGroup>
							<p>* #{selfDictationMsg.practiceWordExplanation}</p>
						</div>
					</div>
				</div>

				<div class="w3-container">
					<button onclick="addOrRemoveW3Show('description')" class="w3-btn-block w3-padding w3-left-align w3-light-grey w3-medium w3-leftbar">
						<i class="fa fa-chevron-down" aria-hidden="true"></i> #{dictationMsg.submitYourInfo}
					</button>
					<div id="description" class="w3-accordion-content w3-container w3-medium w3-leftbar w3-light-grey">
						<h:panelGroup rendered="#{empty dictationPracticeController.memberDictationHistory}">
							<a4j:outputPanel id="dictationHistoryInput">
								<a4j:region>
									<fieldset>
										#{dictationMsg.submitYourInfo}
										<h:messages tooltip="true" errorClass="error" infoClass="innerHeading" globalOnly="false" />
										<a4j:outputPanel id="outputPanel" rendered="#{dictationPracticeController.showHistoryInputForm}">
											<table width="90%" class="formContent">
												<tr>
													<td width="120" class="formTitle">#{dictationMsg.name}</td>
													<td width="5" class="formTitle">:</td>
													<td><h:inputText id="name" value="#{dictationPracticeController.dictationHistory.practicerName}" style="width: 90%" maxlength="50">
													</h:inputText></td>
												</tr>
												<tr>
													<td class="formTitle">#{dictationMsg.school}</td>
													<td class="formTitle">:</td>
													<td><h:inputText id="school" value="#{dictationPracticeController.dictationHistory.practicerSchool}" style="width: 90%" maxlength="255">
													</h:inputText></td>
												</tr>
												<tr>
													<td class="formTitle">#{dictationMsg.age}</td>
													<td class="formTitle">:</td>
													<td><h:selectOneRadio id="ageGroup" value="#{dictationPracticeController.dictationHistory.ageGroupValue}" layout="pageDirection" layoutWidth="4">
														<f:selectItems value="#{dictationEditController.availableAgeGroups}" />
													</h:selectOneRadio></td>
												</tr>
											</table>
											<p>
												<a4j:commandButton render="dictationHistoryInput" action="#{dictationPracticeController.submitDictationHistory}" value="#{dictationMsg.submit}" />
											</p>
										</a4j:outputPanel>
									</fieldset>
								</a4j:region>
							</a4j:outputPanel>
						</h:panelGroup>
					</div>
				</div>

				<c:if test="#{not empty dictationPracticeController.memberDictationHistory}">
					<esl:memberDictationHistory history="#{dictationPracticeController.memberDictationHistory}" />
				</c:if>

			</div>
		</h:form>
	</ui:define>

</ui:composition>