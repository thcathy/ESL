<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fmt="http://java.sun.com/jstl/fmt"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:esl="http://www.funfunspell.com/jsf"
	template="/template/main.xhtml">

	<ui:define name="subTitle">#{htmlHeadMsg.practice_grammar_practice_title}</ui:define>
	<ui:define name="head">
		<meta name="keywords" content="#{htmlHeadMsg.practice_grammar_desc}" />
		<script type="text/javascript">
		//<![CDATA[
			jQuery.noConflict();
			
			jQuery(document).ready(
				function() {
					jQuery('td[id*=inputTD]').each(function(i) {
						jQuery(this).hover(
							function () {								
								jQuery('#question'+(i+1)).css('background-color','#ecf71b');
								
								// scroll to the position
								var offset = jQuery('#question'+(i+1)).offset().top - jQuery('#scrollablePassage').offset().top;
								if (offset < 0 || offset > 500) {jQuery('#scrollablePassage').animate({scrollTop:  '+=' + offset + 'px'},{ queue: false });}
							},
							  function () {
								jQuery('#question'+(i+1)).css('background-color','');
							  })			    
					})
			});
		//]]>
		</script>
	</ui:define>
	<ui:define name="titleImg">
		<img src="#{languageController.imagesPath}/title/grammarpractice.gif" />
	</ui:define>

	<ui:define name="mainContent">
		<div class="comicBlue">
			<h:form id="inputForm">
				<table style="width: 100%; padding-bottom: 20px;">
					<tr>
						<td>
							<h3>
								<h:outputFormat value="#{selfDictationMsg.resultTitle}">
									<f:param value="#{grammarPracticeController.mark}"/>
									<f:param value="#{grammarPracticeController.practice.totalQuestions}"/>
								</h:outputFormat>
							</h3>
						</td>
					</tr>
					<tr>						
						<td>
							<div class="buttons">
								<h:link outcome="/practice/grammar/quick"><img src="#{request.contextPath}/images/icon/silk/font.png" />#{grammarMsg.resultRetry}</h:link>			
							</div>
						</td>
					</tr>
				</table>
				<table style="width: 100%;">					
					<tr>
						<td style="padding-right: 5px;" valign="top"
							align="left">
							<table
								style="background-color: #f5f5f5; table-layout:fixed; background-image: url('#{request.contextPath}/images/graphic/notebook.png'); background-repeat: repeat;">
								<tr>
									<td style="width: 25px;">&nbsp;</td>
									<td
										style="width: 1px; border-left: 1px solid #ffaa9f; border-right: 1px solid #ffaa9f;"></td>
									<td style="max-width:500px; padding-left: 5px; padding-right: 5px;"><div id="scrollablePassage" style="overflow: auto; max-width:500px; max-height: 650px;"><h:outputText
											escape="false" styleClass="grammarPassage"
											value="#{grammarPracticeController.htmlPassageWithAnswer}" /></div></td>									
								</tr>
							</table>
						</td>
						<td valign="top" style="width: 30%;">
							<table style="width: 100%;">
								<a4j:repeat var="answer" rowKeyVar="r" value="#{grammarPracticeController.inputAnswers}">
									<tr>
										<td width="20">#{r+1}.</td>
										<td id="inputTD#{r+1}" class="inputAnswer">#{answer}&nbsp; 
											<h:panelGroup rendered="#{grammarPracticeController.results[r]}"><img src="#{request.contextPath}/images/graphic/right.gif" /></h:panelGroup>
											<h:panelGroup rendered="#{!grammarPracticeController.results[r]}"><img src="#{request.contextPath}/images/graphic/wrong.gif" /></h:panelGroup>
										</td>
									</tr>
								</a4j:repeat>
							</table>
						</td>
					</tr>
				</table>
			</h:form>
		</div>
	</ui:define>

</ui:composition>