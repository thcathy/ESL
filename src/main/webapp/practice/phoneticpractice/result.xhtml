<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:t="http://myfaces.apache.org/tomahawk"
				xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
				xmlns:a4j="http://richfaces.org/a4j"
				xmlns:rich="http://richfaces.org/rich"
				xmlns:esl="http://www.funfunspell.com/jsf"
				xmlns:util="http://java.sun.com/jsf/composite/components/util"
				template="/template/short.xhtml">

	<ui:define name="subTitle">#{htmlHeadMsg.practice_phoneticpractice_result_title}</ui:define>
	<ui:define name="head">
		<meta name="keywords" content="#{htmlHeadMsg.practice_phoneticpractice_result_desc}" />
	</ui:define>

	<ui:define name="mainDiv">
		<div class="w3-content w3-padding-12">
			<div class="w3-card-4 w3-white w3-margin-bottom">
				<div class="w3-container w3-green">
					<h3>
						<i class="fa fa-pencil-square" aria-hidden="true"></i> #{generalMsg.vocabPractice}
					</h3>
				</div>

				<h:form>
					<h:panelGroup rendered="#{!authenticationController.authenticated}">
					<div class="w3-medium w3-panel w3-pale-green w3-leftbar w3-border-green w3-center w3-margin">
						<p>
							<h:outputText value="#{phonPracticeMsg.resultVisitorMessage}" />
							<h:commandLink action="#{profileController.startSignUp}"><u><h:outputText value="#{phonPracticeMsg.resultSignupMessage}" /></u></h:commandLink>
						</p>
						<h:commandLink styleClass="w3-btn w3-green" action="#{profileController.startSignUp}">#{authMsg.signupTitle}</h:commandLink>
					</div>
					</h:panelGroup>

					<h:panelGroup rendered="#{authenticationController.authenticated}">
						<h:panelGroup rendered="#{phoneticPracticeController.levelUp}">
							<p>
								<h:outputFormat value="#{phonPracticeMsg.resultLvUp}"><f:param value="#{userSession.member.grade.longTitle}" /></h:outputFormat>
							</p>
						</h:panelGroup>
						<h:panelGroup rendered="#{!phoneticPracticeController.levelUp and userSession.member.grade.level == phoneticPracticeController.practice.grade.level}">
							<p>
								<h:outputFormat value="#{phonPracticeMsg.resultLvRetain}">
									<f:param value="#{userSession.member.grade.phoneticPracticeLvUpRequire-phoneticPracticeController.currentGradeResult.mark}" />
								</h:outputFormat>
							</p>
						</h:panelGroup>
					</h:panelGroup>
				</h:form>

				<div class="w3-margin w3-xlarge w3-padding-bottom w3-text-teal">
					<h3>
						<h:outputFormat value="#{phonPracticeMsg.resultTitle}">
							<f:param value="#{phoneticPracticeController.practice.mark}"/>
							<f:param value="#{phoneticPracticeController.practice.totalQuestions}"/>
							<f:param value="#{phoneticPracticeController.practice.grade.description}"/>
						</h:outputFormat>
					</h3>
					<a4j:outputPanel id="msgPanel">
						<div class="w3-medium w3-panel w3-pale-green w3-leftbar w3-border-green">
							<h:messages tooltip="false" styleClass="w3-ul" globalOnly="true" />
						</div>
					</a4j:outputPanel>

					<esl:scoreBar2 startMark="#{phoneticPracticeController.practice.mark}" maxMark="#{phoneticPracticeController.practice.totalQuestions}" />
					<div class="w3-responsive">
						<!-- Histories -->
						<table class="w3-table-all w3-medium w3-margin-top">
							<thead>
							<tr class="w3-theme">
								<td></td>
								<td><h:outputText value="#{phonPracticeMsg.practicePhonetic}" /></td>
								<td><h:outputText value="#{phonPracticeMsg.practiceWord}" /></td>
								<td><h:outputText value="#{phonPracticeMsg.practiceAnswer}" /></td>
								<td></td>
								<td></td>
							</tr>
							</thead>
							<tfoot><tr>
								<td colspan="6"><div style="text-align: right; font-weight: bolder" >#{phonPracticeMsg.practiceMark}: ${phoneticPracticeController.practice.mark}  / ${phoneticPracticeController.practice.totalQuestions}</div></td>
							</tr></tfoot>
							<a4j:repeat var="i" rowKeyVar="r" value="#{phoneticPracticeController.practice.answers}">
								<tr>
									<td>Q#{phoneticPracticeController.practice.currentQuestion-r}</td>
									<td>[<h:outputText escape="false" value="#{phoneticPracticeController.practice.questions[phoneticPracticeController.practice.currentQuestion-1-r].IPA}" />]</td>
									<td><a href="#{phonPracticeMsg.practiceDictionaryLink}#{phoneticPracticeController.practice.questions[phoneticPracticeController.practice.currentQuestion-1-r].word}" target="_blank"><u><h:outputText value="#{phoneticPracticeController.practice.questions[phoneticPracticeController.practice.currentQuestion-1-r].word}" /></u></a></td>
									<td><h:outputText value="#{phoneticPracticeController.practice.answers[phoneticPracticeController.practice.currentQuestion-1-r]}" /></td>
									<td>
										<a4j:outputPanel rendered="#{phoneticPracticeController.practice.corrects[phoneticPracticeController.practice.currentQuestion-1-r]}"><i class="fa fa-check w3-text-light-green" aria-hidden="true"></i></a4j:outputPanel>
										<a4j:outputPanel rendered="#{!phoneticPracticeController.practice.corrects[phoneticPracticeController.practice.currentQuestion-1-r]}"><i class="fa fa-times w3-text-red" aria-hidden="true"></i></a4j:outputPanel>
									</td>
									<td align="center">
										<a4j:outputPanel rendered="#{authenticationController.authenticated and !memberWordController.savedQuestion[phoneticPracticeController.practice.questions[phoneticPracticeController.practice.currentQuestion-1-r]]}">
											<a4j:region>
												<a4j:commandLink render="msgPanel" action="#{memberWordController.saveWord}">
													<f:setPropertyActionListener target="#{memberWordController.selectedPhoneticQuestion}" value="#{phoneticPracticeController.practice.questions[phoneticPracticeController.practice.currentQuestion-1-r]}" />
													<i class="fa fa-plus-circle" aria-hidden="true"></i>
												</a4j:commandLink>
											</a4j:region>
										</a4j:outputPanel>
									</td>
								</tr>
							</a4j:repeat>
						</table>
					</div>
					<div class="w3-container w3-light-grey w3-border w3-small">
						<h:panelGroup rendered="#{authenticationController.authenticated}"><p><i class="fa fa-plus-circle" aria-hidden="true"></i> <h:outputText value="#{phonPracticeMsg.practiceUseMemberWord}" /></p></h:panelGroup>
						<p>* #{phonPracticeMsg.practiceWordExplanation}</p>
					</div>

					<div class="w3-row w3-center w3-margin w3-medium">
						<h:form>
							<div class="w3-half">
								<h:link styleClass="w3-btn w3-green" outcome="/practice/phoneticpractice/index?locale=#{languageController.locale}">#{phonPracticeMsg.resultRetryPractice}</h:link>
							</div>
							<div class="w3-half">
								<h:commandLink styleClass="w3-btn w3-red" action="#{phoneticPracticeController.start}">#{phonPracticeMsg.resultRetrySameGradePractice}</h:commandLink>
							</div>
						</h:form>
					</div>

					<h:panelGroup rendered="#{authenticationController.authenticated}">
						<esl:topResult title="#{memberSumMsg.summaryScoreRanking}" topResult="#{phoneticPracticeController.scoreRanking}" />
						<br />
						<esl:topResult title="#{memberSumMsg.summaryRatingRanking}" topResult="#{phoneticPracticeController.rateRanking}" />
					</h:panelGroup>
				</div>

				<div class="w3-center w3-theme">
					<img src="#{request.contextPath}/images/graphic/footer_1.png" alt="footer" style="width:100%" />
				</div>
				<div class="w3-center">
					<div class="w3-row w3-theme w3-padding">
						<div class="w3-half w3-left-align">Developing by Timmy Wong</div>
						<div class="w3-half w3-right-align">Â© 2008 funfunspell.com</div>
					</div>
				</div>
			</div>
		</div>

	</ui:define>
</ui:composition>